
{% extends "layout-modal.html" %}

{% block content %}

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">

      <div class="govuk-grid-row govuk-!-margin-bottom-8">
        <div class="govuk-grid-column-full">

          <h1 class="govuk-heading-l">
            Attachments {{ 'for ‘' + document.title + '’' if document.title | length }}
          </h1>

          {% if attachments | length %}

            <p class="govuk-body govuk-!-margin-bottom-8">
              {% if attachments | length == 1 %}
                <!-- One attachment -->
                {% if attachment.content_id and attachment.content_id == attachments[0].content_id %}
                  <!-- Current attachment -->
                  You’re editing ‘{{ attachment.title }}’. There are no other attachments added to this document. You can only insert an attachment that has already been added.
                {% else %}
                  <!-- Not current attachment -->
                  You can add a link to this attachment in the body of the content.
                {% endif -%}
              {% else %}
                <!-- Many attcachments -->
                {%- if attachment.content_id | length %}
                  <!-- Current attachment -->
                  You’re editing ‘{{ attachment.title }}’. You can add a link to the other {{ 'attachment' if attachments | length == 2 else 'attachments' }} in the body of the content.
                {% else %}
                  <!-- Not current attachment -->
                  You can add a link to one of these attachments in the body of the content.
                {% endif -%}
              {% endif -%}
            </p>

            <dl class="govuk-summary-list">
            {%- for item in attachments %}

              {% if item.content_id != attachment.content_id %}

              <div class="govuk-summary-list__row app-c-summary-list__row">
                <!-- <dt class="govuk-summary-list__key">
                  {{ item.title if item.title | length else "Untitled attachment" }}
                </dt> -->
                <dd class="govuk-summary-list__value">
                  <p class="govuk-body govuk-!-font-weight-bold">{{ item.title if item.title | length else "Untitled attachment" }}</p>
                  <p class="govuk-body-s">
                    {% if item.isbn | length or item.urn | length or item.cpn | length or item.hcpn | length %}Ref:{% endif %}
                    {% if item.isbn | length %}
                      ISBN {{ item.isbn }}
                    {%- endif -%}
                    {%- if item.urn | length %}
                      {%- if item.isbn | length %},{% endif %}
                      {{ item.urn }}
                    {%- endif -%}
                    {%- if item.cpn | length %}
                      {%- if item.urn | length %},{% endif %}
                      CP {{ item.cpn }}
                    {%- endif -%}
                    {%- if item.hcpn | length %}
                      {%- if item.cpn | length %},{% endif %}
                      HC {{ item.hcpn }} {{ item.parliamentary_session }}
                    {% endif %}
                  </p>
                  {%- if item.type == 'external' %}
                    <p class="govuk-body-s">{{ item.url }}</p>
                  {% endif -%}

                </dd>
                <dd class="govuk-summary-list__actions">
                  <a class="app-c-button govuk-button" role="button" href="#">Insert as link</a>
                </dd>
                {#%- if document.document_schema == 'news' %#}
                <dd class="govuk-summary-list__actions">
                  <a class="app-c-button govuk-button govuk-button--secondary" role="button" href="#">Insert as attachment</a>
                </dd>
                {#% endif -%#}
              </div>
              {% endif -%}

            {% endfor -%}
            </dl>

          {% else %}

            <p class="govuk-body">No attachments have been added to this document. You can only insert an attachment that has already been added.</p>
            <p class="govuk-body">To add an attachment, save your changes and go to the attachments section.</p>

          {% endif -%}

        </div>
      </div>

    </div>
  </div>

{% endblock %}
