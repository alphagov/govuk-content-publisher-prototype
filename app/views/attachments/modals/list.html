
{% extends "layout-modal.html" %}

{% block content %}

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">

      <div class="govuk-grid-row govuk-!-margin-bottom-8">
        <div class="govuk-grid-column-two-thirds">

          <h1 class="govuk-heading-l">
            Attachments {{ 'for ‘' + document.title + '’' if document.title | length }}
          </h1>

          {% if attachments | length %}

            <p class="govuk-body govuk-!-margin-bottom-8">You can add a link to one of these attachments in the body of the content.</p>

            {%- for attachment in attachments %}

              {#% if attachment.content_id != attachment_id %#}

                {%- call appAttachmentActions({
                  items: [
                    {
                      text: 'Insert attachment as link',
                      href: '#'
                    }
                  ] if attachment.content_id != attachment_id
                }) %}

                  {% call appAttachment({
                    heading: {
                      text: attachment.title if attachment.title | length else "Untitled attachment"
                    },
                    href: attachment.url if attachment.type == 'external' else '/documents/' + attachment.document_id + '/attachments/' + attachment.content_id + '/preview',
                    target: "_blank",
                    references: {
                      isbn: attachment.isbn,
                      urn: attachment.urn,
                      cpn: attachment.cpn,
                      hcpn: attachment.hcpn,
                      parliamentary_session: attachment.parliamentary_session
                    },
                    metadata: {
                      contentType: 'text/html' if attachment.type == 'html' else ('application/pdf' if attachment.type == 'file'),
                      thumbnail: 'document' if attachment.type in ['file','html']
                    }
                  }) %}

                    {%- if attachment.type == 'external' %}
                      <p class="govuk-body-s">{{ attachment.url }}</p>
                    {% endif -%}

                  {% endcall %}

                {% endcall -%}

              {#% endif -%#}

            {% endfor -%}

          {% else %}

            <p class="govuk-body">No attachments have been added to this document. You can only insert an attachment that has already been added.</p>
            <p class="govuk-body">To add an attachment, save your changes and go to the attachments section.</p>

          {% endif -%}

        </div>
      </div>

    </div>
  </div>

{% endblock %}
