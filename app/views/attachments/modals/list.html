
{% extends "layout-modal.html" %}

{% block content %}

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">

      <div class="govuk-grid-row govuk-!-margin-bottom-8">
        <div class="govuk-grid-column-two-thirds">

          <h1 class="govuk-heading-l">
            Attachments {{ 'for ‘' + document.title + '’' if document.title | length }}
          </h1>

          {% if attachments | length %}

            <p class="govuk-body govuk-!-margin-bottom-8">You can add a link to one of these attachments in the body of the document.</p>

            {%- for attachment in attachments %}

              {%- call appAttachmentActions({
                items: [
                  {
                    text: 'Insert attachment as link',
                    href: '#'
                  }
                ]
              }) %}

                {%- if attachment.type == 'external' %}
                  {%- call appAttachment({
                    heading: {
                      text: attachment.title if attachment.title | length else "Untitled attachment"
                    },
                    href: attachment.url,
                    target: "_blank"
                  }) %}

                    <p class="govuk-body-s">{{ attachment.url }}</p>

                  {% endcall -%}
                {% endif -%}

                {{ appAttachment({
                  heading: {
                    text: attachment.title if attachment.title | length else "Untitled attachment"
                  },
                  href: '/documents/' + attachment.document_id + '/attachments/' + attachment.content_id + '/modal/preview',
                  target: "_blank",
                  metadata: {
                    filename: (attachment.title | slugify) + '.pdf',
                    fileSize: 1234560,
                    contentType: 'application/pdf',
                    pageCount: 25,
                    thumbnail: 'document'
                  }
                }) if attachment.type == 'file' }}

                {{ appAttachment({
                  heading: {
                    text: attachment.title if attachment.title | length else "Untitled attachment"
                  },
                  href: '/documents/' + attachment.document_id + '/attachments/' + attachment.content_id + '/modal/preview',
                  target: "_blank",
                  metadata: {
                    contentType: 'text/html',
                    thumbnail: 'document'
                  }
                }) if attachment.type == 'html' }}

              {% endcall -%}

            {% endfor -%}

          {% else %}

            <p class="govuk-body">No attachments have been added to this document. You can only insert an attachment that has already been added.</p>
            <p class="govuk-body">To add an attachment, save your changes and go to the attachments section.</p>

          {% endif -%}

        </div>
      </div>

    </div>
</div>

{% endblock %}
